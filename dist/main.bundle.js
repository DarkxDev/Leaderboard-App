(()=>{const e=document.querySelector("#scores-list"),t=document.querySelector("#scores-header button"),a=document.querySelector("#scores-form form"),o="https://us-central1-js-capstone-backend.cloudfunctions.net/api";t.addEventListener("click",(async()=>{(async t=>{const a=await fetch(`${o}/games/${t}/scores`),n=await a.json();e.innerHTML="",n.result.forEach((t=>{const a=document.createElement("li");a.innerHTML=`${t.user}: ${t.score}`,e.appendChild(a)}))})(localStorage.getItem("gameID"))})),a.addEventListener("submit",(async e=>{e.preventDefault();const t=document.querySelector("#form-name").value,n=document.querySelector("#form-score").value;(async(e,t,a)=>{await fetch(`${o}/games/${e}/scores`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,score:Number(a)})})})(localStorage.getItem("gameID"),t,n),a.reset()})),window.addEventListener("load",(async()=>{if(!localStorage.getItem("gameID")){const e=await(async()=>{const e=await fetch(`${o}/games`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"New Game"})});return(await e.json()).result.split(" ").pop().slice(0,-1)})();localStorage.setItem("gameID",e)}}))})();